<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.example.bookangel.mappers.CouponMapper">

    <select id="checkCoupon" resultType="integer">
        SELECT couponNum FROM BOOK_COUPON WHERE couponName =#{couponName} AND couponStatus = 0
    </select>

    <update id="useCoupon">
        UPDATE BOOK_COUPON
        SET COUPONSTATUS=1, MEMBERNUM=#{memberNum}
        WHERE COUPONNUM=#{couponNum}
    </update>

    <select id="companyCouponList" resultType="couponVO">
        SELECT couponNum, couponName, CouponStatus, memberNum, ownNum FROM BOOK_COUPON
        WHERE ownNum = #{memberNum}
    </select>
</mapper>