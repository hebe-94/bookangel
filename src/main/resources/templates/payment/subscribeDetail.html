<!DOCTYPE html>
<!--
   Helios by Pixelarity
   pixelarity.com | hello@pixelarity.com
   License: pixelarity.com/license
-->
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <title>ê¸°ë¶ì²œì‚¬ | êµ¬ë…í•˜ê¸°</title>
    <meta charset="utf-8"/>

    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content=""/>
    <meta name="keywords" content=""/>
    <meta name="author" content="Codrops"/>
    <link rel="stylesheet" type="text/css" href="/css/default.css"/>
    <link rel="stylesheet" type="text/css" href="/css/component.css"/>
    <link rel="stylesheet" type="text/css" href="/css/introduce.css"/>
    <link rel="stylesheet" href="/css/subscribeDetail.css"/>

    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no"/>
    <noscript>
        <link rel="stylesheet" href="/css/noscript.css"/>
    </noscript>

    <!-- logo í°íŠ¸ -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=East+Sea+Dokdo&display=swap"
          rel="stylesheet">
    <!-- underLogo í°íŠ¸ -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Yeon+Sung&display=swap"
          rel="stylesheet">
    <!-- ê¸°ë³¸ í°íŠ¸ -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Gowun+Dodum&display=swap" rel="stylesheet">
</head>
<style>
    /* body ê¸°ë³¸ í°íŠ¸ ì „ì²´ ì ìš© */

    body {
        font-family: 'Gowun Dodum', sans-serif;
    }

    #logo {
        font-family: 'East Sea Dokdo', cursive;
        font-size: 100px;
    }

    #underLogo {
        font-family: 'Yeon Sung', cursive;
        font-size: 100px;
    }

    .payment {
        border: 2.5px solid rgba(205, 205, 205, 1);
        border-radius: 2em;
        display: flex;
        justify-content: space-around;
        margin-top: 5em;
        padding-top: 1.5em;
        padding-bottom: 1.5em;
        background-color: rgba(255, 250, 240, 0.1);
    }

    .title {
        font-weight: 600;
        font-size: 24px;
    }

    .detail-text {
        height: 12px;
        text-align: left;
        font-size: 20px;
        width: 13%;
        display: inline-block;
        padding-left: 3px
    }

    .checkbox {
        display: inline-flex;
        flex-direction: row;
        align-items: center;
    }

    .coupon-text {
        width: 80%;
        display: inline-block;
        height: 2.5em;
        border: 3px solid;
        border-radius: 0.5em;
        border-color: darkgray;
        margin-right: 2%;
    }

    #submitBTN {
        width: 100%;
        height: 3em;

    }

    #couponNumber {
        text-align: center;
        letter-spacing: 3px;
    }


    div.payment {
        margin: 0 auto;
        width: 55%;
        text-align: center;
    }

    div.payment-left {

    }

    div.payment-detail {
        text-align: left;
    }


    div.payment-price {
        text-align: left;
    }

    div.payment-price ul li {
        list-style: none;
        text-align: left;
    }

    div.payment-price ul li p {
        display: inline;
    }

    div.payment-status label {
        background-color: white;
        width: 49%;
        display: block;
        height: 3em;
        border: 3px solid;
        border-radius: 0.5em;
        border-color: #ffb7aa;
        /*border-color: antiquewhite;*/
    }

    div.payment-status {
        display: block;
        height: 6em;
    }

    div.payment-status span {
        height: inherit;
        display: block;
        padding: 1.5% 0;
    }

    div.payment-price-border {

        border: 1px solid rgba(205, 205, 205, 1);
        border-radius: 1em;
        padding: 1em 0;
    }

    div.payment-price-border ul li {
        display: flex;
        justify-content: space-between;
        display: flex;
    }

    div.payment-price-border ul li p {
        margin-right: 5px;
        font-size: 20px;
    }

    div.payment-checkInfo {
        text-align: left;
        margin-bottom: 1.5em;
    }

    input[type="checkbox"] {
        width: 16px; /*Desired width*/
        height: 16px; /*Desired height*/
        cursor: pointer;
        -webkit-appearance: none;
        appearance: auto;
        border: 2px solid #df7366;
        background-color: #df7366;

    }
</style>
<body class="homepage is-preload" style="background-color:white;">
<div class="wrapper style2">

    <!-- Main -->
    <div id="page-wrapper">

        <!--  Header -->
        <div id="header">
            <!-- Nav --> <!-- ìƒë‹¨íƒ­(ì•„ë§ˆ ëª¨ë“  ë¶„ë“¤ì´ ì“°ì…”ì•¼ í•  ì½”ë“œ..) -->
            <nav id="nav">

                <!-- ê¸°ë¶ì²œì‚¬ ë¡œê³  -->
                <div>
                    <a href="/main/mainPage"> <!-- ë¡œê³  í´ë¦­ì‹œ ë©”ì¸í˜ì´ì§€ë¡œ ì´ë™ -->
                        <img id="logoImg" src="/images/kibookLogo.png"></a>
                </div>
                <ul>
                    <!-- ê²€ìƒ‰ -->
                    <form id="searchForm" style="width: 261px;float:left; padding: 0px;" action="/book/list" name="searchForm">
                        <div class="search" style="float: left; display:inline-block">
                            <input id="keyword" type="text" name="keyword" placeholder="ê²€ìƒ‰ì–´ ì…ë ¥" style="display:inline-block; border:0; float:left; z-index:0;">
                            <!--                        <input type="text" name="search_text" id="search_text" value="" style="display:inline-block; border:0; float:left; z-index:0;" placeholder="ê²€ìƒ‰ì–´ ì…ë ¥" onkeydown="javascript: if(event.keyCode == 13) {document.searchForm.submit();}">-->
                        </div>
                        <button onclick="javascript:void(0);" style="float: right; display:inline-block; margin-right: -51px; text-align:center; padding-top:10px;">
                            <img id="searchImg" style="margin-top: -8%; width: 26px;" src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/Pg0KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDE2LjAuMCwgU1ZHIEV
                             4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPg0KPCFET0NUWVBFIHN2ZyBQVUJMSUMgIi0vL1czQy8vRFREIFNWRyAxLjEvL0VOIiAiaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkIj4NCjxzdmcgdmVyc2l
                             vbj0iMS4xIiBpZD0iQ2FwYV8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCINCgkgd2lkdGg9IjMwLjIzOXB4IiBoZWlnaHQ9IjMwLjIzOXB4IiB2aWV3Qm9
                             4PSIwIDAgMzAuMjM5IDMwLjIzOSIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgMzAuMjM5IDMwLjIzOTsiDQoJIHhtbDpzcGFjZT0icHJlc2VydmUiPg0KPGc+DQoJPHBhdGggZD0iTTIwLjE5NCwzLjQ2Yy00LjYxMy00LjYxMy0xMi4xMjEtNC42MTMtMTYuNzM0LDB
                             jLTQuNjEyLDQuNjE0LTQuNjEyLDEyLjEyMSwwLDE2LjczNQ0KCQljNC4xMDgsNC4xMDcsMTAuNTA2LDQuNTQ3LDE1LjExNiwxLjM0YzAuMDk3LDAuNDU5LDAuMzE5LDAuODk3LDAuNjc2LDEuMjU0bDYuNzE4LDYuNzE4YzAuOTc5LDAuOTc3LDIuNTYxLDAuOTc3LDMuNTM1LDANCgk
                             JYzAuOTc4LTAuOTc4LDAuOTc4LTIuNTYsMC0zLjUzNWwtNi43MTgtNi43MmMtMC4zNTUtMC4zNTQtMC43OTQtMC41NzctMS4yNTMtMC42NzRDMjQuNzQzLDEzLjk2NywyNC4zMDMsNy41NywyMC4xOTQsMy40NnoNCgkJIE0xOC4wNzMsMTguMDc0Yy0zLjQ0NCwzLjQ0NC05LjA0OSw
                             zLjQ0NC0xMi40OTIsMGMtMy40NDItMy40NDQtMy40NDItOS4wNDgsMC0xMi40OTJjMy40NDMtMy40NDMsOS4wNDgtMy40NDMsMTIuNDkyLDANCgkJQzIxLjUxNyw5LjAyNiwyMS41MTcsMTQuNjMsMTguMDczLDE4LjA3NHoiLz4NCjwvZz4NCjxnPg0KPC9nPg0KPGc+DQo8L2c+DQo
                             8Zz4NCjwvZz4NCjxnPg0KPC9nPg0KPGc+DQo8L2c+DQo8Zz4NCjwvZz4NCjxnPg0KPC9nPg0KPGc+DQo8L2c+DQo8Zz4NCjwvZz4NCjxnPg0KPC9nPg0KPGc+DQo8L2c+DQo8Zz4NCjwvZz4NCjxnPg0KPC9nPg0KPGc+DQo8L2c+DQo8Zz4NCjwvZz4NCjwvc3ZnPg0K" />
                        </button>
                    </form>
                    <!-- íšŒì›ì •ë³´ -->
                    <li>
                        <a href="#">ğŸ“–
                            <th:block th:if="${memberNum} == null" th:text="ë¹„íšŒì›"/>
                            <input type="hidden" name="sub" th:value="${sub}">

                            <th:block th:if="${memberNum} != null" th:text="${memberName}"/>
                            <input type="hidden" name="sessionType" value="${sessionType}">

                        </a>
                        <ul>
                            <th:block th:if="${memberNum} == null">
                                <li id="loginTab"><a href="/member/login">ë¡œê·¸ì¸</a></li>
                                <li><a href="/main/qna">Q&A</a></li>
                            </th:block>

                            <th:block th:if="${memberNum} != null">
                                <li id="myPageTab"><a>ë§ˆì´í˜ì´ì§€&hellip;</a>
                                    <ul>
                                        <li><a href="/member/mypage">ë‚´ì •ë³´ ë³´ê¸°</a></li>
                                        <li><a href="/member/memberModify">íšŒì›ì •ë³´ ìˆ˜ì •</a></li>
                                        <li id="applyTab"><a href="/board/list">ì‹ ì²­ê²Œì‹œíŒ</a></li><!-- ê´€ë¦¬ì ì „ìš© -->
                                        <li><a href="/member/withdraw">íšŒì›íƒˆí‡´</a></li>
                                    </ul>
                                </li>
                                <li><a href="/main/qna">Q&A</a></li>
                                <li id="logoutTab"><a href="/member/logout">ë¡œê·¸ì•„ì›ƒ</a></li>
                            </th:block>

                        </ul>
                    </li>
                </ul>
            </nav>

        </div>
        <!--  Header  ë-->
    </div>

    <!-- ë©”ì¸ í™”ë©´ -->
    <div class="payment" style="margin-top: 5em;">
        <!-- í…Œë‘ë¦¬ë¥¼ ìœ„í•œ div -->
        <div style="width: 95%">
            <!-- í°íŠ¸ 18,16 í”½ì…€ -->
            <div>
                <h2 class="title">ê²°ì œ ìƒì„¸ ì •ë³´</h2>
            </div>

            <br>
            <div class="payment-detail">
                <p class="title" style="text-align: left;"><b>ì •ê¸°êµ¬ë…</b></p>
                <div id="card-text">
                    <span class="detail-text">êµ¬ë…ê¸°ê°„</span> <span style="font-size: 20px;" th:text="${date}"
                                                                id="subscribe-card-text"></span>
                </div>

                <div id="coupon-text" style="display: none">
                    <span class="detail-text">êµ¬ë…ê¸°ê°„</span> <span style="font-size: 20px;" th:text="${couponDate}"
                                                                id="subscribe-coupon-text"></span>
                </div>
                <span class="detail-text">ë‹¤ìŒ ê²°ì œì¼</span> <span style="font-size: 20px;" th:text="${nextPayment}"
                                                              id="nextPayment"></span>
            </div>
            <br>

            <div class="payment-price">
                <p class="title" style="text-align: left;"><b>ê²°ì œê¸ˆì•¡</b></p>
                <div class="payment-price-border">
                    <ul style="margin: 0 20px;padding-left: 0px;">
                        <li>
                            <p>ìƒí’ˆê¸ˆì•¡</p>
                            <p th:text="${price}"></p>
                        </li>
                        <li>
                            <!--                            model.addAttribute("subExist","true")-->
                            <p>í• ì¸ê¸ˆì•¡</p>
                            <!--ì²«ë‹¬ë¬´ë£Œ-->
                            <div th:if="${subExist.toString().equals('false')}"><p style="border-bottom: 1px #8a8a8a">
                                <span>ì²« ë‹¬ ë¬´ë£Œ</span>(-) <span th:text="${price}"></span></p></div>
                            <!--ì¬ êµ¬ë…-->
                            <div th:if="${subExist.toString().equals('true')}"><p style="border-bottom: 1px #8a8a8a">
                                -</p></div>
                        </li>
                        <hr style="border: solid 0.5px #8a8a8a;">
                        <li>
                            <!--                            model.addAttribute("monthType", "1");-->

                            <p>ì´ ê²°ì œê¸ˆì•¡</p>
                            <p th:if="${subExist.toString().equals('false')}">0ì›</p>
                            <p th:if="${subExist.toString().equals('true') && monthType.toString().equals('1')}">
                                9,900ì›</p>
                            <p th:if="${subExist.toString().equals('true') && monthType.toString().equals('12')}">
                                99,000ì›</p>

                        </li>
                    </ul>
                </div>
            </div>
            <br>

            <div class="payment-status">
                <p class="title" style="text-align: left;"><b>ê²°ì œìˆ˜ë‹¨</b></p>
                <label style="float: left;" id="couponLabel" onclick="couponCheck()"><span>ì¿ í°</span></label>
                <label style="float: right;" id="cardLabel" onclick="cardCheck()"><span>ì¹´ë“œ</span></label>
                <input type="hidden" th:value="${monthType}" id="monthType">
                <!--ì¿ í°ì„ ëˆ„ë¥´ë©´ ì¿ í°ë²ˆí˜¸ ì…ë ¥í•˜ê²Œë” í•´ì„œ ê°’ì„ ë°›ì•„ì˜¤ê¸°
                ì¹´ë“œë¥¼ ëˆ„ë¥´ë©´ ì²´í¬ë§Œ ëœë‹¤

                ê²°ì œí•˜ê¸°ì¼ë•Œ ì¿ í°ì„ ë„£ì—ˆìœ¼ë©´ ë°”ë¡œ ë„˜ì–´ê°€ê³ ,
                ì¹´ë“œë©´ ì¹´ë“œ ê²°ì œ íŒì—… ë„ìš°ê¸°-->
            </div>
            <br>

            <div style="height: 3em; display: none;" id="couponInput">
                <p style="text-align: left; font-size: 20px; margin: 0;">-ë¥¼ ì œì™¸í•œ ì¿ í°ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ ì£¼ì„¸ìš”</p>

                <input type="text" class="coupon-text" maxlength="16" id="couponNumber" style="text-align: center;">
                <input type="button" value="í™•ì¸" style="width: 18%; height: 2.5em;" onclick="checkCoupon()">
                <span id="confirmCoupon" style="color: #df7366; display: none; text-align: left; display: block"></span>
            </div>


            <br>
            <br>
            <div class="payment-checkInfo">
                <div class="checkbox">
                    <input type="checkbox" id="autopay"/>
                    <label for="autopay">[í•„ìˆ˜] ìë™ê²°ì œ ìƒí’ˆì„ì„ ì¸ì§€í•˜ì˜€ìœ¼ë©° ì·¨ì†Œ/í™˜ë¶ˆ, ì†Œë“ê³µì œ ì •ì±… ë“± ìƒí’ˆ êµ¬ë§¤ ì •ì±…ì— ë™ì˜í•©ë‹ˆë‹¤. </label>
                </div>
                <br>
                <div class="checkbox">
                    <input type="checkbox" id="personal"/>
                    <label for="personal">[í•„ìˆ˜] ê°œì¸ì •ë³´ ìˆ˜ì§‘ ë° ì´ìš©ì— ë™ì˜í•©ë‹ˆë‹¤.</label>
                </div>

                <div>
                    <input th:if="${subExist.toString().equals('false')}" type="button" value="ê²°ì œí•˜ê¸°" id="submitBTN"
                           onclick="submit(0)">
                    <input th:if="${subExist.toString().equals('true') && monthType.toString().equals('1')}"
                           type="button" value="ê²°ì œí•˜ê¸°" id="submitBTN" onclick="submit(9900)">
                    <input th:if="${subExist.toString().equals('true') && monthType.toString().equals('12')}"
                           type="button" value="ê²°ì œí•˜ê¸°" id="submitBTN" onclick="submit(99000)">
                </div>
            </div>
            <form id="register"></form>


        </div>

    </div>
    <!-- ë©”ì¸ í™”ë©´ ë div -->


</div>

<hr>
<!--  Copyright -->
<div class="copyright" style="height: 10em">
    <p style="margin-bottom: 0.5em; font-weight: 600; font-size: 20px; margin-left: 0.5em;text-align: left;font-size: 16px;">ê¸°ë¶ì²œì‚¬</p>
    <p style="margin-bottom: 0.2em;margin-left: 0.5em;text-align: left;font-size: 16px;">ëŒ€í‘œì : í•œë™ì„, ì¼ì‚¬ì²œë¦¬ &nbsp;&nbsp; ì£¼ì†Œ: ì„œìš¸íŠ¹ë³„ì‹œ ê°•ë‚¨êµ¬ ì—­ì‚¼ë™ 736-7 3~4ì¸µ</p>
    <label for="intro" style="margin-bottom: 0.2em;margin-left: 0.5em;text-align: left;font-size: 16px;"><a style="text-decoration: none" id="intro" href="/main/introduce">ê¸°ë¶ì²œì‚¬ ì†Œê°œ</a></label>
    <p style="margin-bottom: 0.2em;margin-left: 0.5em;text-align: left;font-size: 16px;">&copy; Kibook Angel. All rights reserved.</p>
</div>

<!-- Scripts -->

<script src="/js/jquery.min.js"></script>
<script src="/js/jquery.dropotron.min.js"></script>
<script src="/js/jquery.scrolly.min.js"></script>
<script src="/js/jquery.scrollex.min.js"></script>
<script src="/js/browser.min.js"></script>
<script src="/js/breakpoints.min.js"></script>
<script src="/js/util.js"></script>
<script src="/js/main.js"></script>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

<!-- ê²°ì œ ê´€ë ¨ api -->
<script type="text/javascript" src="https://static.nid.naver.com/js/naverLogin_implicit-1.0.3.js"
        charset="utf-8"></script>
<script type="text/javascript" src="https://cdn.iamport.kr/js/iamport.payment-1.1.5.js"></script>

<script th:inline="javascript">

    let date = $("#nextPayment").text();
    // ã…ã…ã…ã…-ã…ã…ã…ã…-ã…ã…ã…ã…-ã…ã…ã…ã…
    var newCouponText = "";
    // ã…ã…ã…ã…ã…ã…ã…ã…ã…ã…ã…ã…ã…ã…ã…ã…
    var couponText = "";
    // couponText[] : split
    var arrCouponText;

    // ê²°ì œ ë°©ì‹ ì„ íƒ í™•ì¸ìš© 1 : ì¹´ë“œ / 0 : ì¿ í°
    var paymentType;

    // ì‹œì‘í•˜ìë§ˆì 1ë…„êµ¬ë…ì„ ë“¤ì–´ì™”ë‹¤ë©´ ì¿ í° ê²°ì œë¥¼ ì—†ì• ì£¼ê¸°!
    $(document).ready(function () {
        if ($("#monthType").val() == 12) {
            // ì¿ í° ë²„íŠ¼ ì—†ì• ê¸°
            $("#couponLabel").hide();

            // ì¹´ë“œ ë²„íŠ¼ width ë„“íˆê¸°
            $("#cardLabel").css("width", "100%")
        }

    });

    // ì¿ í°ê²°ì œ ëˆŒë €ì„ë•Œ
    function couponCheck() {
        console.log("ì¿ í° ì„ íƒ");
        $("#couponLabel").css('background-color', '#df7366');
        $("#couponLabel").css('color', 'white');
        $("#cardLabel").css('background-color', 'white');
        $("#cardLabel").css('color', 'black');
        $("#couponInput").show();

        $("#coupon-text").show();
        $("#card-text").hide();
        $("#nextPayment").text("| ì¿ í° ì‚¬ìš©");

        paymentType = "0";
    }

    // ì¹´ë“œê²°ì œ ëˆŒë €ì„ë•Œ
    function cardCheck() {
        console.log("ì¹´ë“œ ì„ íƒ");
        $("#cardLabel").css('background-color', '#df7366');
        $("#cardLabel").css('color', 'white');
        $("#couponLabel").css('background-color', 'white');
        $("#couponLabel").css('color', 'black');
        $("#couponInput").hide();

        $("#coupon-text").hide();
        $("#card-text").show();
        $("#nextPayment").text(date);
        $("#confirmCoupon").hide();
        $("#couponNumber").removeAttr('placeholder');
        $("#couponNumber").removeAttr('readonly');

        $("#couponNumber").val("");

        paymentType = "1";

    }

    // ì¿ í°ë²ˆí˜¸ë¥¼ ì ê²Œ ì…ë ¥í–ˆì„ë•Œ ìœ íš¨ì„± í™•ì¸
    function couponNameCheck() {
        var check = false;

        if (arrCouponText.length == 0) {
            alert("ì¿ í°ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ ì£¼ì„¸ìš” : " + arrCouponText.length);
            $(".coupon-text").focus();
            check = true;
        } else if (arrCouponText.length < 16) {
            alert("ì¿ í°ë²ˆí˜¸ë¥¼ í™•ì¸ í•´ì£¼ì„¸ìš” : " + arrCouponText.length);
            $(".coupon-text").val("");
            $(".coupon-text").focus();
            check = true;
        }
        return check;
    }

    // ì¿ í° ì…ë ¥ë€ í´ë¦­ì‹œ ê°’ ë¹„ìš°ê¸°
    $(".coupon-text").focusin(function () {
        $("#couponNumber").val("");
    });

    // ì¿ í° ì…ë ¥ë€ focusoutì‹œ - ë¥¼ ë¶™ì—¬ì£¼ê¸°
    $(".coupon-text").focusout(function () {
        console.log("í¬ì»¤ìŠ¤ ì•„ì›ƒë¨");
        newCouponText = "";
        couponText = $("#couponNumber").val();
        couponText = couponText.replace("-", "");
        arrCouponText = couponText.split("");

        for (var i = 0; i < arrCouponText.length; i++) {
            newCouponText += arrCouponText[i];
            if (i % 4 == 3 && !(i + 1 == arrCouponText.length)) {
                newCouponText += "-";
            }
        }

        $("#couponNumber").val(newCouponText);
    });


    // ì‚¬ìš©ê°€ëŠ¥í•œ ì¿ í°ì¸ì§€ í™•ì¸
    function checkCoupon() {
        var couponName = $("#couponNumber").val();
        console.log(couponName);

        if (couponNameCheck()) {
            return;
        }

        $.ajax({
            url: "/coupon/checkCoupon",
            type: "POST",
            data: {"couponName": couponName},
            dataType: "text",
            success: function (result) {
                console.log(result);
                $("#confirmCoupon").text("ì‚¬ìš© ê°€ëŠ¥í•œ ì¿ í°ì…ë‹ˆë‹¤.");
                $("#confirmCoupon").show();
                $("#couponNumber").attr("readonly", true);
                $("#couponNumber").attr("placeholder", couponName);

            },
            error: function (result) {
                console.log(result);
                $("#confirmCoupon").text("ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ì¿ í°ì…ë‹ˆë‹¤.");
                $("#confirmCoupon").show();
            }
        });

    }

    function submit(price) {// ì¿ í°ì„ ëˆ„ë¥´ê³ , ì¿ í° ì¸ì¦ í›„ ê²°ì œ,     ì¹´ë“œë¥¼ ëˆ„ë¥´ê³  ê²°ì œ

        if ($("#autopay").is(":checked") == false || $("#personal").is(":checked") == false) {
            alert("ì²´í¬ì‚¬í•­ì„ í™•ì¸í•´ ì£¼ì„¸ìš”");
            return;
        }


        // ê²°ì œí•˜ê¸° ë²„íŠ¼ ëˆ„ë¥´ê¸°
        var registerForm = $("#register");

        if (paymentType === "0") { // ì¿ í° ë²„íŠ¼ ëˆŒë €ì„ë•Œ
            if ($("#couponNumber").is("[readonly]")) {
                console.log("ì¿ í° ê²°ì œ ì§„í–‰");
                registerForm.attr("method", "post");
                registerForm.attr("action", "/payment/register");

                registerForm.append($('<input/>', {type: 'hidden', name: 'paymentType', value: 0}));
                registerForm.append($('<input/>', {type: 'hidden', name: 'impUid', value: null}));
                registerForm.append($('<input/>', {type: 'hidden', name: 'merchantUid', value: null}));
                registerForm.submit();

                // ë©¤ë²„ ë””ë¹„ì— êµ¬ë…ì¤‘ìœ¼ë¡œ ë³€ê²½ (membernum, => í˜„ì¬ ì„¸ì…˜ memberNumì„ ë„˜ê²¨ì„œ ê±°ê¸°ì—ì„œ 0ì„ 1ë¡œ
                // êµ¬ë…ì¤‘ì´ë©´ ë„˜ì–´ê°€ë©´ ì•ˆë˜ëŠ”ë°..

                // ì¿ í° ì‚¬ìš©í–ˆë‹¤ê³  ë³€ê²½
                // ì „ë‹¬ ìˆœì„œ : paymentì»¨íŠ¸ë¡¤ëŸ¬ë¡œ ê°€ì„œ, paymentserviceë¡œ ë³´ë‚´ê³  paymentDAO, couponDAOë¥¼ ì‚¬ìš©í• ê²ƒ

                // ë„˜ê¸¸ ì •ë³´ëŠ”
                // (ì¿ í°í…Œì´ë¸”ì—ì„œ ì‚¬ìš©í–ˆë‹¤ëŠ”ê²ƒì„ í•˜ê¸° ìœ„í•´) memberNum ì „ë‹¬, status 1ë¡œ ë³€ê²½ -> ë©¤ë²„í…Œì´ë¸”
                // (êµ¬ë…ì¤‘ì´ë¼ëŠ” ê²ƒì„ ì•Œë¦¬ê¸° ìœ„í•´) memberNum, couponNumì „ë‹¬(ì´ê±´ ì¿¼ë¦¬ë¬¸ì—ì„œ êµ¬í•´ì•¼ í•˜ê±°ë‚˜ ì¡°íšŒí–ˆì„ë•Œ ê°’ì„ ê°™ì´ ë°›ì•„ì˜¤ê¸°)
                //                            subMonth(2), subDate(SYSDATE), expireDate(2ë‹¬)
                // paymentType : 0 : ì¿ í° / 1 : 1ë‹¬ / 2 : 1ë…„ êµ¬ë…
                // ì¿ í°ë²ˆí˜¸ :
                // â€» ì¿ í°numì„ êµ¬í•´ì˜¤ëŠ” ë°©ë²• :  1. í˜„ì¬ ë§Œë“ ê²ƒì„ ìˆ˜ì •(ë¦¬í„´ê°’ë“¤ ëª¨ë‘ ìˆ˜ì •í•´ì•¼í•¨), 2. ë‹¤ì‹œ ì¿¼ë¦¬ë¬¸ í•œë²ˆë” êµ¬í•´ì„œ ì˜¤ê¸°. -> ì¿¼ë¦¬ë¬¸ ë³€ê²½ìœ¼ë¡œ ê°€ì ¸ì˜´

            } else {
                alert("ì¿ í° ë“±ë¡ í™•ì¸ í›„ ê²°ì œë¥¼ ì§„í–‰í•´ ì£¼ì„¸ìš”");
            }

        } else if (paymentType === "1") { // ì¹´ë“œ ë²„íŠ¼ ëˆŒë €ì„ ë•Œ
            console.log("ì¹´ë“œ ê²°ì œ ì§„í–‰");
            iamport(price);

        }
        // ì¹´ë“œ ê²°ì œ í•˜ê³ , ë©¤ë²„ êµ¬ë…í–ˆë‹¤ëŠ”ê²ƒì„ ë„£ì–´ì£¼ê¸° (ê¸ˆì•¡ì„ ì–´ë–»ê²Œ ê°€ì ¸ì˜¬ì§€ ê³ ë¯¼í•´ë³´ê¸°)
        else { // ì•„ë¬´ê²ƒë„ ì•ˆëˆŒë €ì„ë•Œ
            alert("ê²°ì œ ë°©ë²•ì„ ì„ íƒí•´ ì£¼ì„¸ìš”!");
        }
    }


    function iamport(price) {
        //ê°€ë§¹ì  ì‹ë³„ì½”ë“œ
        IMP.init('imp77982928');
        IMP.request_pay({
            pg: 'kcp',
            pay_method: 'card',
            merchant_uid: 'merchant_' + new Date().getTime(),
            name: 'ê¸°ë¶ì²œì‚¬ êµ¬ë…ì‹ ì²­', //ê²°ì œì°½ì—ì„œ ë³´ì—¬ì§ˆ ì´ë¦„
            amount: price, //ì‹¤ì œ ê²°ì œë˜ëŠ” ê°€ê²©
            buyer_email: 'iszzon@gmail.com', // êµ¬ë§¤ì ì •ë³´
            buyer_name: 'ì‹ ì„¸í›ˆ',
            buyer_tel: '010-4759-2499',
            buyer_addr: 'ê²½ê¸°ë„ ì„±ë‚¨ì‹œ ë¶„ë‹¹êµ¬',
            buyer_postcode: '123-456'
        }, function (rsp) {
            console.log(rsp);
            if (rsp.success) { // ì„±ê³µ ì‹œ
                var registerForm = $("#register");
                registerForm.attr("method", "post");
                registerForm.attr("action", "/payment/register");

                // #{impUid}, #{MerchantUid}
                if ([[${monthType}]] == "1") {
                    registerForm.append($('<input/>', {type: 'hidden', name: 'paymentType', value: 1}));
                } else {
                    registerForm.append($('<input/>', {type: 'hidden', name: 'paymentType', value: 12}));
                }
                registerForm.append($('<input/>', {type: 'hidden', name: 'impUid', value: rsp.imp_uid}));
                registerForm.append($('<input/>', {type: 'hidden', name: 'merchantUid', value: rsp.merchant_uid}));


                var msg = 'ê²°ì œê°€ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.';
                msg += 'ê³ ìœ ID : ' + rsp.imp_uid;
                msg += 'ìƒì  ê±°ë˜ID : ' + rsp.merchant_uid;
                msg += 'ê²°ì œ ê¸ˆì•¡ : ' + rsp.paid_amount;
                msg += 'ì¹´ë“œ ìŠ¹ì¸ë²ˆí˜¸ : ' + rsp.apply_num;

            } else {
                var msg = 'ê²°ì œì— ì‹¤íŒ¨í•˜ì˜€ìŠµë‹ˆë‹¤.';
                msg += 'ì—ëŸ¬ë‚´ìš© : ' + rsp.error_msg;
            }
            alert(msg);
            registerForm.submit();
        });
    }
</script>

<!--kkh 2021.11.03 ìƒˆë¡œ ì‘ì„±í•œ ì½”ë“œ-->
<script th:inline="javascript">
    // ê¸€ ë“±ë¡ ì‹œ ì „ë‹¬ë°›ëŠ” ê²Œì‹œê¸€ ë²ˆí˜¸ë¥¼ alertìœ¼ë¡œ ì¶œë ¥
    let searchForm = $(document.searchForm);


    $("button.search").on("click", function (e) {  /*$("a.search").on("click", function(e){*/
        e.preventDefault();


        if (!searchForm.find("input#keyword").val()) {
            alert("í‚¤ì›Œë“œë¥¼ ì…ë ¥í•˜ì„¸ìš”");
            return;
        }
        searchForm.submit();
    });

    $("input#keyword").on("keydown", function (e) {
        if (e.keyCode == 13) {
            e.preventDefault();
            if (!searchForm.find("input#keyword").val()) {
                alert("í‚¤ì›Œë“œë¥¼ ì…ë ¥í•˜ì„¸ìš”");
                return;
            }
            searchForm.submit();
        }
    })
</script>
<!--ìœ„ kkh 2021.11.03 ìƒˆë¡œ ì‘ì„±í•œ ì½”ë“œ-->
</body>
</html>