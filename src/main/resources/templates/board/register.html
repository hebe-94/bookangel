<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <title>ê¸°ë¶ì²œì‚¬ | ì¹œêµ¬ë˜ê¸°</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
    <meta name="description" content="" />
    <meta name="keywords" content="" />
    <link rel="stylesheet" href="/css/main.css" type="text/css"/>
    <link rel="stylesheet" href="/css/adminboard.css" type="text/css"/>
    <link rel="stylesheet" href="/css/adminBoardApply.css" type="text/css"/>
    <link rel="stylesheet" href="/css/bootstrap.css" type="text/css"/>
    <link rel="stylesheet" href="/css/component.css" type="text/css"/>
    <link rel="stylesheet" href="/css/default.css" type="text/css"/>
    <noscript><link rel="stylesheet" href="/css/noscript.css" type="text/css"/></noscript>
    <!-- logo í°íŠ¸ -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=East+Sea+Dokdo&display=swap" rel="stylesheet">
    <!-- underLogo í°íŠ¸ -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Yeon+Sung&display=swap" rel="stylesheet">
    <!-- ê¸°ë³¸ í°íŠ¸ -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Gowun+Dodum&display=swap" rel="stylesheet">
    <style>
        .big-width {display: block;}
        .small-width {display: none;}

        @media (max-width: 918px) {
            .writer {display: none;}
            .regDate {display: none;}
            .updateDate {display: none;}
        }

        /* body ê¸°ë³¸ í°íŠ¸ ì „ì²´ ì ìš© */
        body{
            font-family: 'Gowun Dodum', sans-serif;
        }
        #logo{
            font-family: 'East Sea Dokdo', cursive;
            font-size:100px;
        }
        #underLogo{
            font-family: 'Yeon Sung', cursive;
            font-size:100px;
        }
        #category{
            font-family:'Gowun Dodum', sans-serif;
            font-size:30px;
            text-align: center;
        }
        ul{
            list-style:none;
            padding-left: 0px
        }
    </style>
<body class="no-sidebar is-preload">
<div id="page-wrapper">
    <div id="header">
        <!-- Nav --> <!-- ìƒë‹¨íƒ­(ì•„ë§ˆ ëª¨ë“  ë¶„ë“¤ì´ ì“°ì…”ì•¼ í•  ì½”ë“œ..) -->
        <nav id="nav">

            <!-- ê¸°ë¶ì²œì‚¬ ë¡œê³  -->
            <div>
                <a href="/main/mainPage"> <!-- ë¡œê³  í´ë¦­ì‹œ ë©”ì¸í˜ì´ì§€ë¡œ ì´ë™ -->
                    <img id="logoImg" src="/images/kibookLogoBlack.png"></a>
            </div>
            <ul>
                <!-- ê²€ìƒ‰ -->
                <form id="searchForm" style="width: 261px;float:left; padding: 0px;" method="post" action="/book/BookSearchOk" name="searchForm">
                    <div class="search" style="float: left; display:inline-block">
                        <input type="text" name="search_text" id="search_text" value="" style="display:inline-block; border:0; float:left; z-index:0;" placeholder="ê²€ìƒ‰ì–´ ì…ë ¥" onkeydown="javascript: if(event.keyCode == 13) {document.searchForm.submit();}">
                    </div>
                    <button onclick="document.searchForm.submit();" style="float: right; display:inline-block; margin-right: -51px; text-align:center; padding-top:10px;">
                        <img id="searchImg" style="margin-top: -8%; width: 26px;" src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/Pg0KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDE2LjAuMCwgU1ZHIEV
                             4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPg0KPCFET0NUWVBFIHN2ZyBQVUJMSUMgIi0vL1czQy8vRFREIFNWRyAxLjEvL0VOIiAiaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkIj4NCjxzdmcgdmVyc2l
                             vbj0iMS4xIiBpZD0iQ2FwYV8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCINCgkgd2lkdGg9IjMwLjIzOXB4IiBoZWlnaHQ9IjMwLjIzOXB4IiB2aWV3Qm9
                             4PSIwIDAgMzAuMjM5IDMwLjIzOSIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgMzAuMjM5IDMwLjIzOTsiDQoJIHhtbDpzcGFjZT0icHJlc2VydmUiPg0KPGc+DQoJPHBhdGggZD0iTTIwLjE5NCwzLjQ2Yy00LjYxMy00LjYxMy0xMi4xMjEtNC42MTMtMTYuNzM0LDB
                             jLTQuNjEyLDQuNjE0LTQuNjEyLDEyLjEyMSwwLDE2LjczNQ0KCQljNC4xMDgsNC4xMDcsMTAuNTA2LDQuNTQ3LDE1LjExNiwxLjM0YzAuMDk3LDAuNDU5LDAuMzE5LDAuODk3LDAuNjc2LDEuMjU0bDYuNzE4LDYuNzE4YzAuOTc5LDAuOTc3LDIuNTYxLDAuOTc3LDMuNTM1LDANCgk
                             JYzAuOTc4LTAuOTc4LDAuOTc4LTIuNTYsMC0zLjUzNWwtNi43MTgtNi43MmMtMC4zNTUtMC4zNTQtMC43OTQtMC41NzctMS4yNTMtMC42NzRDMjQuNzQzLDEzLjk2NywyNC4zMDMsNy41NywyMC4xOTQsMy40NnoNCgkJIE0xOC4wNzMsMTguMDc0Yy0zLjQ0NCwzLjQ0NC05LjA0OSw
                             zLjQ0NC0xMi40OTIsMGMtMy40NDItMy40NDQtMy40NDItOS4wNDgsMC0xMi40OTJjMy40NDMtMy40NDMsOS4wNDgtMy40NDMsMTIuNDkyLDANCgkJQzIxLjUxNyw5LjAyNiwyMS41MTcsMTQuNjMsMTguMDczLDE4LjA3NHoiLz4NCjwvZz4NCjxnPg0KPC9nPg0KPGc+DQo8L2c+DQo
                             8Zz4NCjwvZz4NCjxnPg0KPC9nPg0KPGc+DQo8L2c+DQo8Zz4NCjwvZz4NCjxnPg0KPC9nPg0KPGc+DQo8L2c+DQo8Zz4NCjwvZz4NCjxnPg0KPC9nPg0KPGc+DQo8L2c+DQo8Zz4NCjwvZz4NCjxnPg0KPC9nPg0KPGc+DQo8L2c+DQo8Zz4NCjwvZz4NCjwvc3ZnPg0K">
                    </button>
                </form>
                <li>
                    <a href="#">ğŸ“–
                        <th:block th:text="${memberName}" />
                        <input type="hidden" name="sessionType" value="${sessionType}">
                    </a>
                    <ul>
                        <th:block th:if="${memberNum} == null">
                            <li id="loginTab"><a href="/member/login">ë¡œê·¸ì¸</a></li>
                            <li><a  href="/member/QnA">Q&A</a></li>
                        </th:block>

                        <th:block th:if="${memberNum} != null">
                            <li id="myPageTab"><a>ë§ˆì´í˜ì´ì§€&hellip;</a>
                                <ul>
                                    <li><a href="/member/mypage">ë‚´ì •ë³´ ë³´ê¸°</a></li>
                                    <li><a href="/member/AllModify">íšŒì›ì •ë³´ ìˆ˜ì •</a></li>
                                    <li id="applyTab"><a href="/board/list">ì‹ ì²­ê²Œì‹œíŒ</a></li><!-- ê´€ë¦¬ì ì „ìš© -->
                                    <li><a  href="/member/withdraw">íšŒì›íƒˆí‡´</a></li>
                                </ul>
                            </li>
                            <li><a  href="/member/QnA">Q&A</a></li>
                            <li id="logoutTab"><a  href="/member/MemberLogout">ë¡œê·¸ì•„ì›ƒ</a></li>
                        </th:block>

                    </ul>
                </li>
            </ul>
        </nav>

    </div>
    <br>
    <br>

    <!-- ì‹ ì²­í•˜ê¸° form ì‘ì„±ë€ -->
    <div>
        <form action="/board/register" id="registForm" name="writeForm" method="post" onsubmit="return send()">
            <fieldset id="applyForm">
                <div class="fields">
                <legend>ì‹ ì²­í•˜ê¸°</legend>
                <!--<p id="writer" style="margin-left: -2%;" name="boardMemberNum">ì‘ì„±ì : ì•„ì´ë””ê°€ì ¸ì˜¤ê¸°</p>-->
                    <div class="field">
                        <input name="memberNum" type="hidden" th:value="${memberNum}" style=" z-index: 0;"/>
                    </div>

                <!--<input type="hidden" name="c_memeber_id" value="${session_id}">-->
                    <!--<input name="memberNum" type="hidden" th:text="${memberNum}" style="text-align:left; background: white; font-size: 1em; border: none; z-index: 0;" readonly/>-->

                <div class="form-group">
                    <label for="exampleTextarea" class="form-label mt-4">ì œëª©</label>
                    <input id="boardTitle" name="boardTitle"  type="text" placeholder="ì œëª© ì…ë ¥" style=" z-index: 0;">
                </div>
                <br>
                <br>
                <div class="form-group">
                    <label for="exampleTextarea" class="form-label mt-4">í™ˆí˜ì´ì§€ ì£¼ì†Œ</label>
                    <input type="text" id="siteLink" name="siteLink" class="form-control" aria-describedby="emailHelp" placeholder="ì˜ˆ)www.kibookAngel.com" style="font-family: 'Gowun Dodum', sans-serif; z-index:0;">
                    <small id="emailHelp" class="form-text text-muted" style="font-size:13px;">ê¸°ê´€ í™ˆí˜ì´ì§€ ì£¼ì†Œë¥¼ ì •í™•í•˜ê²Œ ì…ë ¥í•´ì£¼ì„¸ìš”.</small>
                </div>
                <div class="form-group">
                    <label for="exampleTextarea" class="form-label mt-4">ë‚´ìš©</label>
                    <textarea class="form-control" id="exampleTextarea" name="boardContent" rows="10" style="resize: none; font-family: 'Gowun Dodum', sans-serif;" >ì‹ ì²­ ê¸°ê´€ ëª… :
ì‹ ì²­ ì§€ì—­ :
ë‹´ë‹¹ì ì—°ë½ì²˜ :
ë‹´ë‹¹ì ì´ë©”ì¼ :

ì‚¬ìš© ê³„íšì„œ ê°„ëµí•˜ê²Œ ì‘ì„±í•˜ì—¬ PDFíŒŒì¼ë¡œ ì²¨ë¶€ ìš”ì²­ ë“œë¦½ë‹ˆë‹¤.(ì–‘ì‹ ììœ )

ìŠ¹ì¸ ì—¬ë¶€ëŠ” ì´ë©”ì¼ë¡œ ë°œì†¡ ë˜ì˜¤ë‹ˆ, ì •í™•í•œ ì´ë©”ì¼ ì£¼ì†Œ ì‘ì„± ë¶€íƒë“œë¦½ë‹ˆë‹¤.
ìŠ¹ì¸ ì‹œ ì¿ í° ë²ˆí˜¸ëŠ” ë‚´ ì •ë³´ ë³´ê¸°ì—ì„œ í™•ì¸ ê°€ëŠ¥í•©ë‹ˆë‹¤.
			      </textarea>
                </div>
                <div class="form-group field">
                        <h4>ì²¨ë¶€íŒŒì¼</h4>
                        <input class="form-control" type="file" name="uploadFiles" multiple id="formFile" style="font-family: 'Gowun Dodum', sans-serif;">
                    </div>
                    <div class="field">
                        <div class="uploadResult">
                            <ul></ul>
                        </div>
                    </div>
<!--                    <div class="bigPictureWrapper">
                        <div class="bigPicture"></div>
                    </div>-->
      <!--          <div>
                    <input class="form-control" type="file" name="uploadFiles" multiple id="formFile" style="font-family: 'Gowun Dodum', sans-serif;">
                </div>-->
                <div>
                    <input type="submit" value="ì‹ ì²­" class="btn btn-primary" style="left: 29%; font-family: 'Gowun Dodum', sans-serif;display: flex;align-items: center;border-radius: 5px;" id="ModifySubmit">
                    <input type="button" value="ì·¨ì†Œ"  class="btn btn-primary" style="left: 35%; font-family: 'Gowun Dodum', sans-serif; display: flex;align-items: center;border-radius: 5px;" id="ModifyCancel" onclick="javascript:history.back(); return false;">
                        </div>
                </div>
            </fieldset>
        </form>
    </div>
</div>
<hr />
</div>
<!-- Copyright -->
<div class="copyright">
    <ul class="menu">
        <li>&copy; Kibook Angel. All rights reserved.</li>
    </ul>
</div>


</body>
<script src="/js/jquery.min.js"></script>
<script src="/js/jquery.dropotron.min.js"></script>
<script src="/js/jquery.scrolly.min.js"></script>
<script src="/js/jquery.scrollex.min.js"></script>
<script src="/js/browser.min.js"></script>
<script src="/js/breakpoints.min.js"></script>
<script src="/js/util.js"></script>
<script src="/js/main.js"></script>
<script src="/js/modernizr.custom.js"></script>
<script src="/js/toucheffects.js"></script>
<script src='https://code.jquery.com/jquery-3.2.1.min.js'></script>
<script th:inline="javascript">
    function send(){
        if(!$("input#boardTitle").val()){
            alert("ì œëª©ì„ ì‘ì„±í•´ì£¼ì„¸ìš”.");
            return false;
        }
        else if(!$("input#siteLink").val()){
            alert("í™ˆí˜ì´ì§€ ì£¼ì†Œë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.");
            return false;
        }
        return true;
    }

</script>
<!--íŒŒì¼ ê´€ë ¨ script-->


<script th:inline="javascript">
    let check = false;

    $(document).ready(function(){
        let regex = new RegExp("(.*?)\.(exe|sh|zip|alz)$");
        let maxSize = 5242880;// 5MB
        let inputFile = $(".uploadDiv input");
        let uploadResult = $(".uploadResult ul");

        //formíƒœê·¸ì— input hidden ìƒì„± ì‹¤ìŠµ
        //ì„œë²„ ìª½ìœ¼ë¡œ ì „ë‹¬í•  ì²¨ë¶€íŒŒì¼ì˜ ë°ì´í„°ë¥¼ input type hiddenìœ¼ë¡œ ì¶”ê°€í•˜ê¸°
        //ì¶”ê°€ëœ liíƒœê·¸ë¥¼ ëª¨ë‘ ê°€ì ¸ì™€ì„œ dataì†ì„±ì„ í†µí•´ ì•Œë§ëŠ” ê°’ì„ ì„¤ì •í•œë‹¤.
        //form.append("ì¶”ê°€í•  HTML") : HTML ì¶”ê°€
        //submitì„ ëˆŒë €ì„ ë•Œ click ì´ë²¤íŠ¸ë¥¼ ë°œìƒí•˜ê³ , ê¸°ì¡´ submitì´ë²¤íŠ¸ëŠ” ë§‰ì•„ì¤˜ì•¼ í•œë‹¤.
        //inputíƒœê·¸ê°€ ëª¨ë‘ ì¶”ê°€ëœ í›„ submit()í•´ì¤€ë‹¤.

        $("input[type='submit']").on("click", function(e){
            e.preventDefault();
            let form = $("form#registForm");
            let str = "";
            $(".uploadResult ul li").each(function(i, obj){
                str += "<input type='hidden' name='attachList[" + i + "].fileName' value='" + $(obj).data('name') + "'>"
                str += "<input type='hidden' name='attachList[" + i + "].uuid' value='" + $(obj).data('uuid') + "'>"
                str += "<input type='hidden' name='attachList[" + i + "].uploadPath' value='" + $(obj).data('path') + "'>"
                str += "<input type='hidden' name='attachList[" + i + "].image' value='" + $(obj).data('type') + "'>"
            });
            form.append(str).submit();
        })

        function showUploadFile(uploadFiles){
            let str = "";
            $(uploadFiles).each(function(i, obj){
                if(!obj.image){
                    let fileCallPath = encodeURIComponent(obj.uploadPath + "/" + obj.fileName);

                    str += "<li data-path='" + obj.uploadPath + "' data-uuid='" + obj.uuid + "' data-name='" + obj.fileName.substring(obj.fileName.indexOf("_") + 1) + "' data-type='" + obj.image +"'>";
                    str += "<div>";
                    str += "<a href='/upload/download?fileName=" + fileCallPath + "'>";
                    str += "<img src='/images/attach.png' width='30px'>" + obj.fileName.substring(obj.fileName.indexOf("_") + 1);
                    str += "</a>"
                    str += "<span data-file='" + fileCallPath + "' data-type='file'>x</span>";
                    str += "</div>";
                    str += "</li>";
                }else{
                    let fileCallPath = encodeURIComponent(obj.uploadPath + "/s_" + obj.fileName);
                    let originPath = encodeURIComponent(obj.uploadPath + "/" + obj.fileName);

                    str += "<li data-path='" + obj.uploadPath + "' data-uuid='" + obj.uuid + "' data-name='" + obj.fileName.substring(obj.fileName.indexOf("_") + 1) + "' data-type='" + obj.image +"'>";
                    str += "<div>";
                    str += "<a href=\"javascript:showImage(\'" + originPath + "\')\">";
                    str += "<img src='/upload/display?fileName=" + fileCallPath + "'>" + obj.fileName.substring(obj.fileName.indexOf("_") + 1);
                    str += "</a>";
                    str += "<span data-file='" + fileCallPath + "' data-type='image'>x</span>";
                    str += "</div>";
                    str += "</li>";
                }
            });
            uploadResult.append(str);
        }

        $(".uploadResult").on("click", "span", function(){
            let targetFile = $(this).data("file");
            let type = $(this).data("type");
            let li = $(this).parents("li");

            $.ajax({
                url: "/upload/deleteFile",
                type: "POST",
                data: {fileName:targetFile, type:type},
                dataType: "text",
                success: function(result){
                    alert(result);
                    li.remove();
                }
            });

        });

        //í™•ì¥ì ë³„ ì—…ë¡œë“œ ì œí•œ, íŠ¹ì • í¬ê¸° ì´ìƒì˜ íŒŒì¼ì€ ì—…ë¡œë“œ ì œí•œ
        function checkExtension(fileName, fileSize){
            if(regex.test(fileName)){
                alert("ì—…ë¡œë“œ í•  ìˆ˜ ì—†ëŠ” íŒŒì¼ì˜ í˜•ì‹ì…ë‹ˆë‹¤.");
                return false;
            }
            if(fileSize >= maxSize){
                alert("íŒŒì¼ ì‚¬ì´ì¦ˆ ì´ˆê³¼");
                return false;
            }
            return true;
        }

        $("input[type='file']").change(function(){
            let formData = new FormData();
            let inputFile = $("input[name='uploadFiles']");
            let files = inputFile[0].files;

            for(let i=0; i<files.length; i++){
                if(!checkExtension(files[i].name, files[i].size)){ return; }
                formData.append("uploadFiles", files[i]);
            }

            $.ajax({
                url: "/upload/uploadAjaxAction",
                type: "post",
                data: formData,
                contentType: false,
                processData: false,
                success: function(fileList){
                    showUploadFile(fileList);
                    inputFile.val("");
                }
            });
        });
    })
</script>



</html>